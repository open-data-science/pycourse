<!doctype html><html lang=ru class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://open-data-science.github.io/pycourse/base/syntactic_sugar/ rel=canonical><link href=../object_class_method/ rel=prev><link href=../final/ rel=next><link rel=icon href=../../assets/logo.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.25"><title>синтаксический сахар - python от ods.ai</title><link rel=stylesheet href=../../assets/stylesheets/main.6543a935.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Golos+Text:300,300i,400,400i,700,700i%7CPT+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Golos Text";--md-code-font:"PT Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config",""),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=red> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> Перейти к содержанию </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Больше не показывать"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> желаете помочь курсу, <a href=https://github.com/open-data-science/pycourse/blob/master/contributing.md target=_blank>переходите к инструкции</a> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул"> <a href=../.. title="python от ods.ai" class="md-header__button md-logo" aria-label="python от ods.ai" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> python от ods.ai </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> синтаксический сахар </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Поиск placeholder=Поиск autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Поиск> <a href=javascript:void(0) class="md-search__icon md-icon" title=Поделиться aria-label=Поделиться data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Очистить aria-label=Очистить tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Инициализация поиска </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/open-data-science/pycourse title="Перейти к репозиторию" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> open-data-science/pycourse </div> </a> </div> </nav> <nav class=md-tabs aria-label=Вкладки data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> главная </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> основы python </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Навигация data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="python от ods.ai" class="md-nav__button md-logo" aria-label="python от ods.ai" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> python от ods.ai </label> <div class=md-nav__source> <a href=https://github.com/open-data-science/pycourse title="Перейти к репозиторию" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> open-data-science/pycourse </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../.. class="md-nav__link "> <span class=md-ellipsis> главная </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> главная </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../authors/ class=md-nav__link> <span class=md-ellipsis> авторы </span> </a> </li> <li class=md-nav__item> <a href=../../community/ class=md-nav__link> <span class=md-ellipsis> сообщество </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/open-data-science/pycourse/blob/master/contributing.md class=md-nav__link> <span class=md-ellipsis> содействие </span> </a> </li> <li class=md-nav__item> <a href=https://github.com/open-data-science/pycourse/blob/master/license class=md-nav__link> <span class=md-ellipsis> лицензия </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> основы python </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> основы python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tools_install/ class=md-nav__link> <span class=md-ellipsis> установка инструментов </span> </a> </li> <li class=md-nav__item> <a href=../jupyter/ class=md-nav__link> <span class=md-ellipsis> ориентация в jupyter </span> </a> </li> <li class=md-nav__item> <a href=../variable_types_output/ class=md-nav__link> <span class=md-ellipsis> переменные, типы и вывод </span> </a> </li> <li class=md-nav__item> <a href=../conditional_comparison/ class=md-nav__link> <span class=md-ellipsis> условия и сравнения </span> </a> </li> <li class=md-nav__item> <a href=../list_loop/ class=md-nav__link> <span class=md-ellipsis> списки и циклы </span> </a> </li> <li class=md-nav__item> <a href=../dictionary/ class=md-nav__link> <span class=md-ellipsis> словари </span> </a> </li> <li class=md-nav__item> <a href=../functions/ class=md-nav__link> <span class=md-ellipsis> функции </span> </a> </li> <li class=md-nav__item> <a href=../object_class_method/ class=md-nav__link> <span class=md-ellipsis> объекты, классы и методы </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> синтаксический сахар </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> синтаксический сахар </span> </a> <nav class="md-nav md-nav--secondary" aria-label=Содержание> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Содержание </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> Введение </span> </a> </li> <li class=md-nav__item> <a href=#magic-methods class=md-nav__link> <span class=md-ellipsis> Магические методы (Magic Methods) </span> </a> <nav class=md-nav aria-label="Магические методы (Magic Methods)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> Пример </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dict-comprehension class=md-nav__link> <span class=md-ellipsis> Генератор словарей (dict-comprehension) </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> Операторы присваивания </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> Операторы сравнения </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> Тернарный оператор </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> Большие числа </span> </a> </li> <li class=md-nav__item> <a href=#ellipsis class=md-nav__link> <span class=md-ellipsis> Многоточие (Ellipsis) </span> </a> <nav class=md-nav aria-label="Многоточие (Ellipsis)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ellipsis_1 class=md-nav__link> <span class=md-ellipsis> Ellipsis — это заполнитель для ненаписанного кода </span> </a> </li> <li class=md-nav__item> <a href=#ellipsis-numpy class=md-nav__link> <span class=md-ellipsis> Использование Ellipsis в NumPy, чтобы опустить размеры </span> </a> </li> <li class=md-nav__item> <a href=#ellipsis_2 class=md-nav__link> <span class=md-ellipsis> Использование Ellipsis для подсказки типа </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#-walrus-operator class=md-nav__link> <span class=md-ellipsis> Морж-оператор (walrus-operator) </span> </a> <nav class=md-nav aria-label="Морж-оператор (walrus-operator)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#- class=md-nav__link> <span class=md-ellipsis> Основы морж-оператора </span> </a> </li> <li class=md-nav__item> <a href=#-_1 class=md-nav__link> <span class=md-ellipsis> Варианты использования морж-оператора </span> </a> <nav class=md-nav aria-label="Варианты использования морж-оператора"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> Отладка </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> Списки и словари </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#f-f-strings class=md-nav__link> <span class=md-ellipsis> f-строки (f-strings) </span> </a> <nav class=md-nav aria-label="f-строки (f-strings)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> Спецификаторы формата </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> Переменные со значениями </span> </a> </li> <li class=md-nav__item> <a href=#-_2 class=md-nav__link> <span class=md-ellipsis> Мини-язык спецификаций форматирования </span> </a> <nav class=md-nav aria-label="Мини-язык спецификаций форматирования"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> Заполнение и центрирование текста </span> </a> </li> <li class=md-nav__item> <a href=#x-o class=md-nav__link> <span class=md-ellipsis> Замена %x и %o и преобразование значения в разные базы </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> Разделитель групп разрядов </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> Выражение процента </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> Форматирование даты и времени </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> Добавление начальных нулей </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> Заключение </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../final/ class=md-nav__link> <span class=md-ellipsis> финальная лекция </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Содержание> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Содержание </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> Введение </span> </a> </li> <li class=md-nav__item> <a href=#magic-methods class=md-nav__link> <span class=md-ellipsis> Магические методы (Magic Methods) </span> </a> <nav class=md-nav aria-label="Магические методы (Magic Methods)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> Пример </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#dict-comprehension class=md-nav__link> <span class=md-ellipsis> Генератор словарей (dict-comprehension) </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> Операторы присваивания </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> Операторы сравнения </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> Тернарный оператор </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> Большие числа </span> </a> </li> <li class=md-nav__item> <a href=#ellipsis class=md-nav__link> <span class=md-ellipsis> Многоточие (Ellipsis) </span> </a> <nav class=md-nav aria-label="Многоточие (Ellipsis)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ellipsis_1 class=md-nav__link> <span class=md-ellipsis> Ellipsis — это заполнитель для ненаписанного кода </span> </a> </li> <li class=md-nav__item> <a href=#ellipsis-numpy class=md-nav__link> <span class=md-ellipsis> Использование Ellipsis в NumPy, чтобы опустить размеры </span> </a> </li> <li class=md-nav__item> <a href=#ellipsis_2 class=md-nav__link> <span class=md-ellipsis> Использование Ellipsis для подсказки типа </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#-walrus-operator class=md-nav__link> <span class=md-ellipsis> Морж-оператор (walrus-operator) </span> </a> <nav class=md-nav aria-label="Морж-оператор (walrus-operator)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#- class=md-nav__link> <span class=md-ellipsis> Основы морж-оператора </span> </a> </li> <li class=md-nav__item> <a href=#-_1 class=md-nav__link> <span class=md-ellipsis> Варианты использования морж-оператора </span> </a> <nav class=md-nav aria-label="Варианты использования морж-оператора"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> Отладка </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> Списки и словари </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#f-f-strings class=md-nav__link> <span class=md-ellipsis> f-строки (f-strings) </span> </a> <nav class=md-nav aria-label="f-строки (f-strings)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> Спецификаторы формата </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> Переменные со значениями </span> </a> </li> <li class=md-nav__item> <a href=#-_2 class=md-nav__link> <span class=md-ellipsis> Мини-язык спецификаций форматирования </span> </a> <nav class=md-nav aria-label="Мини-язык спецификаций форматирования"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> Заполнение и центрирование текста </span> </a> </li> <li class=md-nav__item> <a href=#x-o class=md-nav__link> <span class=md-ellipsis> Замена %x и %o и преобразование значения в разные базы </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> Разделитель групп разрядов </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> Выражение процента </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> Форматирование даты и времени </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> Добавление начальных нулей </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> Заключение </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/open-data-science/pycourse/edit/__master__/docs/base/syntactic_sugar.md title="Редактировать страницу" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <h1 id=_1>Синтаксический сахар<a class=headerlink href=#_1 title="Permanent link">&para;</a></h1> <div class="admonition info"> <p class=admonition-title>Автор(ы)</p> <ul> <li><a href=https://github.com/dKosarevsky>Kosarevsky Dmitry</a></li> </ul> </div> <h2 id=_2>Введение<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p><ins>Синтаксический сахар</ins> — это синтаксис, который позволяет разработчикам писать код проще, «сладким» способом. Следовательно, такой способ даёт роскошь не знать, как работает система под капотом. Синтаксический сахар связан не только с Python, подробнее по <a href=https://ru.wikipedia.org/wiki/Синтаксический_сахар>ссылке</a>.</p> <p>Раннее уже были изучены некоторые способы использования синтаксического сахара в Python, такие как:</p> <ul> <li><a href=../functions/#_17>декораторы</a></li> <li><a href=../functions/#_19>генераторы</a></li> <li><a href=../conditional_comparison/#_5>контекстные менеджеры</a></li> <li><a href=../variable_types_output/#_4>f-строки (f-strings)</a></li> <li><a href=../list_loop/#list-comprehensions>списковое включение или генератор списков (list comprehensions)</a></li> </ul> <p>Важно понимать и другие варианты применения такого функционала изучаемого языка.</p> <h2 id=magic-methods>Магические методы (Magic Methods)<a class=headerlink href=#magic-methods title="Permanent link">&para;</a></h2> <p><ins>Магические методы</ins> (иногда их ещё называют специальными методами) — это методы с предопределенными именами, характеризующимися двойным подчеркиванием в начале и в конце - <code>__init__</code> как пример. Они являются «магическими», потому что</p> <ul> <li>эти методы вызываются косвенно</li> <li>не нужно вызывать напрямую</li> <li>все делается за кулисами</li> </ul> <p>Например, когда создаётся экземпляр класса <code>x = MyClass()</code>, Python выполнит необходимые вызовы <code>__new__</code> и <code>__init__</code>.</p> <h3 id=_3>Пример<a class=headerlink href=#_3 title="Permanent link">&para;</a></h3> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-1>1</a></span>
<span class=normal><a href=#__codelineno-0-2>2</a></span>
<span class=normal><a href=#__codelineno-0-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1></a><span class=n>greet</span> <span class=o>=</span> <span class=s2>&quot;Hello, Python ODS!&quot;</span>
<a id=__codelineno-0-2 name=__codelineno-0-2></a>
<a id=__codelineno-0-3 name=__codelineno-0-3></a><span class=nb>print</span><span class=p>(</span><span class=n>greet</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>Hello,<span class=w> </span>Python<span class=w> </span>ODS!
</code></pre></div></p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=n>greet</span><span class=o>.</span><span class=fm>__repr__</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=s2>&quot;&#39;Hello, Python ODS!&#39;&quot;</span>
</code></pre></div></p> <p>Как видно из примера, метод <code>__repr__()</code> тесно связан с известной функцией <code>print()</code>. Вот еще несколько примеров:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-4-1>1</a></span>
<span class=normal><a href=#__codelineno-4-2>2</a></span>
<span class=normal><a href=#__codelineno-4-3>3</a></span>
<span class=normal><a href=#__codelineno-4-4>4</a></span>
<span class=normal><a href=#__codelineno-4-5>5</a></span>
<span class=normal><a href=#__codelineno-4-6>6</a></span>
<span class=normal><a href=#__codelineno-4-7>7</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1></a><span class=n>list_example</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;test&quot;</span><span class=p>,</span> <span class=s2>&quot;baz&quot;</span><span class=p>,</span> <span class=mi>8</span><span class=p>]</span>
<a id=__codelineno-4-2 name=__codelineno-4-2></a>
<a id=__codelineno-4-3 name=__codelineno-4-3></a><span class=s2>&quot;test&quot;</span> <span class=ow>in</span> <span class=n>list_example</span>
<a id=__codelineno-4-4 name=__codelineno-4-4></a><span class=nb>len</span><span class=p>(</span><span class=n>list_example</span><span class=p>)</span>
<a id=__codelineno-4-5 name=__codelineno-4-5></a><span class=nb>print</span><span class=p>(</span><span class=n>list_example</span><span class=p>)</span>
<a id=__codelineno-4-6 name=__codelineno-4-6></a><span class=n>list_example</span> <span class=o>==</span> <span class=p>[]</span>
<a id=__codelineno-4-7 name=__codelineno-4-7></a><span class=n>list_example</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>True
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=m>3</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=o>[</span><span class=s1>&#39;test&#39;</span>,<span class=w> </span><span class=s1>&#39;baz&#39;</span>,<span class=w> </span><span class=m>8</span><span class=o>]</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>False
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=m>8</span>
</code></pre></div></p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1>1</a></span>
<span class=normal><a href=#__codelineno-6-2>2</a></span>
<span class=normal><a href=#__codelineno-6-3>3</a></span>
<span class=normal><a href=#__codelineno-6-4>4</a></span>
<span class=normal><a href=#__codelineno-6-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=n>list_example</span><span class=o>.</span><span class=fm>__contains__</span><span class=p>(</span><span class=s2>&quot;test&quot;</span><span class=p>)</span>
<a id=__codelineno-6-2 name=__codelineno-6-2></a><span class=n>list_example</span><span class=o>.</span><span class=fm>__len__</span><span class=p>()</span>
<a id=__codelineno-6-3 name=__codelineno-6-3></a><span class=n>list_example</span><span class=o>.</span><span class=fm>__repr__</span><span class=p>()</span>
<a id=__codelineno-6-4 name=__codelineno-6-4></a><span class=n>list_example</span><span class=o>.</span><span class=fm>__eq__</span><span class=p>([])</span>
<a id=__codelineno-6-5 name=__codelineno-6-5></a><span class=n>list_example</span><span class=o>.</span><span class=fm>__getitem__</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>True
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=m>3</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=s2>&quot;[&#39;test&#39;, &#39;baz&#39;, 8]&quot;</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>False
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=m>8</span>
</code></pre></div></p> <p>В этом разделе не будут подробно рассматриваться магические методы, если есть желание узнать больше о них - можно заглянуть в <a href=https://docs.python.org/3.11/reference/datamodel.html>документацию</a> (как пример для Python версии 3.11).</p> <details class=question> <summary>Являются ли магические методы синтаксическим сахаром?</summary> <p>Да!</p> </details> <h2 id=dict-comprehension>Генератор словарей (dict-comprehension)<a class=headerlink href=#dict-comprehension title="Permanent link">&para;</a></h2> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-8-1>1</a></span>
<span class=normal><a href=#__codelineno-8-2>2</a></span>
<span class=normal><a href=#__codelineno-8-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1></a><span class=n>d</span> <span class=o>=</span> <span class=p>{</span><span class=n>n</span><span class=p>:</span> <span class=n>n</span><span class=o>+</span><span class=mi>2</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>)}</span>
<a id=__codelineno-8-2 name=__codelineno-8-2></a>
<a id=__codelineno-8-3 name=__codelineno-8-3></a><span class=nb>print</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=o>{</span><span class=m>0</span>:<span class=w> </span><span class=m>2</span>,<span class=w> </span><span class=m>1</span>:<span class=w> </span><span class=m>3</span>,<span class=w> </span><span class=m>2</span>:<span class=w> </span><span class=m>4</span>,<span class=w> </span><span class=m>3</span>:<span class=w> </span><span class=m>5</span>,<span class=w> </span><span class=m>4</span>:<span class=w> </span><span class=m>6</span>,<span class=w> </span><span class=m>5</span>:<span class=w> </span><span class=m>7</span>,<span class=w> </span><span class=m>6</span>:<span class=w> </span><span class=m>8</span>,<span class=w> </span><span class=m>7</span>:<span class=w> </span><span class=m>9</span>,<span class=w> </span><span class=m>8</span>:<span class=w> </span><span class=m>10</span>,<span class=w> </span><span class=m>9</span>:<span class=w> </span><span class=m>11</span><span class=o>}</span>
</code></pre></div></p> <h2 id=_4>Операторы присваивания<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-10-1>1</a></span>
<span class=normal><a href=#__codelineno-10-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1></a><span class=n>a</span> <span class=o>+=</span> <span class=mi>1</span>
<a id=__codelineno-10-2 name=__codelineno-10-2></a><span class=c1># эквивалент кода: a = a + 1</span>
</code></pre></div></td></tr></table></div> <h2 id=_5>Операторы сравнения<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-11-1>1</a></span>
<span class=normal><a href=#__codelineno-11-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1></a><span class=mi>1</span> <span class=o>&lt;</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=mi>10</span>
<a id=__codelineno-11-2 name=__codelineno-11-2></a><span class=c1># эквивалент кода: 1 &lt; x and x &lt; 10</span>
</code></pre></div></td></tr></table></div> <h2 id=_6>Тернарный оператор<a class=headerlink href=#_6 title="Permanent link">&para;</a></h2> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-12-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1></a><span class=n>x</span> <span class=o>=</span> <span class=n>something</span> <span class=k>if</span> <span class=n>condition</span> <span class=k>else</span> <span class=n>otherthing</span>
</code></pre></div></td></tr></table></div> <h2 id=_7>Большие числа<a class=headerlink href=#_7 title="Permanent link">&para;</a></h2> <p>Для удобства чтения большие числа можно записывать с использованием символа нижнего подчёркивания.</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-13-1>1</a></span>
<span class=normal><a href=#__codelineno-13-2>2</a></span>
<span class=normal><a href=#__codelineno-13-3>3</a></span>
<span class=normal><a href=#__codelineno-13-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1></a><span class=n>number</span> <span class=o>=</span> <span class=mi>1_000_000_000_000</span>
<a id=__codelineno-13-2 name=__codelineno-13-2></a><span class=n>number2</span> <span class=o>=</span> <span class=mi>1000000000000</span>
<a id=__codelineno-13-3 name=__codelineno-13-3></a>
<a id=__codelineno-13-4 name=__codelineno-13-4></a><span class=nb>print</span><span class=p>(</span><span class=n>number</span> <span class=o>==</span> <span class=n>number2</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>True
</code></pre></div></p> <h2 id=ellipsis>Многоточие (Ellipsis)<a class=headerlink href=#ellipsis title="Permanent link">&para;</a></h2> <p>Python имеет специальный встроенный одноэлементный объект под названием <code>Ellipsis</code>. Если вывести три точки или слово <code>Ellipsis</code> в интерактивной оболочке Python, результаты будут следующими:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-15-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1></a><span class=o>...</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>Ellipsis
</code></pre></div></p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-17-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1></a><span class=bp>Ellipsis</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>Ellipsis
</code></pre></div></p> <p>Этот простой предмет кажется незаметным, но если правильно его использовать, он может облегчить нашу жизнь. Рассмотрим три общих сценария, в которых можно использовать <code>Ellipsis</code>.</p> <h3 id=ellipsis_1><code>Ellipsis</code> — это заполнитель для ненаписанного кода<a class=headerlink href=#ellipsis_1 title="Permanent link">&para;</a></h3> <p>При разработке нового модуля обычно определяются некоторые функции или классы, но не реализуются сразу. Потому что хочется только определить, что нужно написать в будущем, и не слишком заботимся о деталях реализации на раннем этапе. В таком сценарии <code>Ellipsis</code> — наш лучший друг:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-19-1>1</a></span>
<span class=normal><a href=#__codelineno-19-2>2</a></span>
<span class=normal><a href=#__codelineno-19-3>3</a></span>
<span class=normal><a href=#__codelineno-19-4>4</a></span>
<span class=normal><a href=#__codelineno-19-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1></a><span class=k>def</span> <span class=nf>create_lecture</span><span class=p>():</span>
<a id=__codelineno-19-2 name=__codelineno-19-2></a>    <span class=o>...</span>
<a id=__codelineno-19-3 name=__codelineno-19-3></a>
<a id=__codelineno-19-4 name=__codelineno-19-4></a><span class=k>class</span> <span class=nc>Lecture</span><span class=p>:</span>
<a id=__codelineno-19-5 name=__codelineno-19-5></a>    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> <p>Можно просто использовать <code>Ellipsis</code> в качестве заполнителя для функции или класса использую тождественный <code>...</code> <code>pass</code>.</p> <p>Вообще говоря, хорошей практикой программирования является то, что сначала проектируются необходимые функции или классы, а потом реализуются. Поэтому такой способ может помочь нашему уму ясно видеть всю структуру и не зацикливаться сразу на деталях.</p> <h3 id=ellipsis-numpy>Использование <code>Ellipsis</code> в <code>NumPy</code>, чтобы опустить размеры<a class=headerlink href=#ellipsis-numpy title="Permanent link">&para;</a></h3> <p><code>NumPy</code> — важная библиотека Python для Data Science. <code>Ellipsis</code> полезно при работе с многомерными массивами в <code>NumPy</code>.</p> <p>Например, если есть трёхмерная матрица и необходимо разделить её, то есть как минимум три способа как сделать это:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-20-1>1</a></span>
<span class=normal><a href=#__codelineno-20-2>2</a></span>
<span class=normal><a href=#__codelineno-20-3>3</a></span>
<span class=normal><a href=#__codelineno-20-4>4</a></span>
<span class=normal><a href=#__codelineno-20-5>5</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1></a><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
<a id=__codelineno-20-2 name=__codelineno-20-2></a>
<a id=__codelineno-20-3 name=__codelineno-20-3></a><span class=n>A</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>rand</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-20-4 name=__codelineno-20-4></a>
<a id=__codelineno-20-5 name=__codelineno-20-5></a><span class=nb>print</span><span class=p>(</span><span class=n>A</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=o>[[[</span><span class=m>0</span>.992417<span class=w>   </span><span class=m>0</span>.9530508<span class=w> </span><span class=o>]</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>  </span><span class=o>[</span><span class=m>0</span>.56965073<span class=w> </span><span class=m>0</span>.30738159<span class=o>]</span>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>  </span><span class=o>[</span><span class=m>0</span>.7711779<span class=w>  </span><span class=m>0</span>.11873405<span class=o>]]</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w> </span><span class=o>[[</span><span class=m>0</span>.95767839<span class=w> </span><span class=m>0</span>.82798645<span class=o>]</span>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>  </span><span class=o>[</span><span class=m>0</span>.31408532<span class=w> </span><span class=m>0</span>.22584154<span class=o>]</span>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>  </span><span class=o>[</span><span class=m>0</span>.22445472<span class=w> </span><span class=m>0</span>.62915576<span class=o>]]]</span>
</code></pre></div></p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-22-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1></a><span class=nb>print</span><span class=p>(</span><span class=n>A</span><span class=p>[:,</span> <span class=p>:,</span> <span class=mi>1</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=o>[[</span><span class=m>0</span>.9530508<span class=w>  </span><span class=m>0</span>.30738159<span class=w> </span><span class=m>0</span>.11873405<span class=o>]</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=w> </span><span class=o>[</span><span class=m>0</span>.82798645<span class=w> </span><span class=m>0</span>.22584154<span class=w> </span><span class=m>0</span>.62915576<span class=o>]]</span>
</code></pre></div></p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-24-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1></a><span class=nb>print</span><span class=p>(</span><span class=n>A</span><span class=p>[</span><span class=o>...</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=o>[[</span><span class=m>0</span>.9530508<span class=w>  </span><span class=m>0</span>.30738159<span class=w> </span><span class=m>0</span>.11873405<span class=o>]</span>
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=w> </span><span class=o>[</span><span class=m>0</span>.82798645<span class=w> </span><span class=m>0</span>.22584154<span class=w> </span><span class=m>0</span>.62915576<span class=o>]]</span>
</code></pre></div></p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-26-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1></a><span class=nb>print</span><span class=p>(</span><span class=n>A</span><span class=p>[</span><span class=bp>Ellipsis</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=o>[[</span><span class=m>0</span>.9530508<span class=w>  </span><span class=m>0</span>.30738159<span class=w> </span><span class=m>0</span>.11873405<span class=o>]</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=w> </span><span class=o>[</span><span class=m>0</span>.82798645<span class=w> </span><span class=m>0</span>.22584154<span class=w> </span><span class=m>0</span>.62915576<span class=o>]]</span>
</code></pre></div></p> <p>Использование <code>Ellipsis</code> (трёх точек) является наиболее экономичным способом разделения многомерной матрицы. Потому что это требует наименьшего набора текста. Время программистов — деньги, не так ли?</p> <h3 id=ellipsis_2>Использование <code>Ellipsis</code> для подсказки типа<a class=headerlink href=#ellipsis_2 title="Permanent link">&para;</a></h3> <p>Подсказки типов были новым функционалом Python версии 3.5. На основе <a href=https://www.python.org/dev/peps/pep-0484/ >PEP 484</a> <code>Ellipsis</code> имеет особое значение для этого функционала.</p> <p>С одной стороны однородные кортежи произвольной длины могут быть выражены с помощью одного типа и <code>Ellipsis</code>, например, <code>Tuple[int, ...]</code>.</p> <p>С другой стороны можно объявить возвращаемый тип вызываемого объекта без указания сигнатуры вызова, заменив <code>Ellipsis</code> (три точки) на список аргументов:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-28-1>1</a></span>
<span class=normal><a href=#__codelineno-28-2>2</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1></a><span class=k>def</span> <span class=nf>partial</span><span class=p>(</span><span class=n>func</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[</span><span class=o>...</span><span class=p>,</span> <span class=nb>str</span><span class=p>],</span> <span class=o>*</span><span class=n>args</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Callable</span><span class=p>[</span><span class=o>...</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
<a id=__codelineno-28-2 name=__codelineno-28-2></a>    <span class=c1># тело функции</span>
</code></pre></div></td></tr></table></div> <p><code>Ellipsis</code> — интересный синтаксический сахар в Python. Его удобно использовать в некоторых сценариях.</p> <h2 id=-walrus-operator>Морж-оператор (walrus-operator)<a class=headerlink href=#-walrus-operator title="Permanent link">&para;</a></h2> <p>Каждая новая версия Python добавляет в язык новые функции. Для Python 3.8 самым большим изменением было добавление выражений присваивания. В частности, оператор <code>:=</code> дает новый синтаксис для присваивания переменных в середине выражений. Такой оператор в просторечии известен как морж-оператор.</p> <p>Уже было <a href=../conditional_comparison/#_5>упоминали ранее</a> о существовании оператора <code>:=</code>, полезно погрузиться в дополнительные возможности такого оператора.</p> <p>Поговорим о том, как:</p> <ul> <li>определить морж-оператора и понять его значение</li> <li>понимать варианты использования морж-оператора</li> <li>избегать повторяющегося кода с помощью морж-оператора</li> <li>конвертировать код, использующий морж-оператора, в код, использующий другие методы присваивания и наоборот</li> <li>понимать влияния на обратную совместимость при использовании морж-оператора</li> <li>использовать соответствующий стиль в выражениях присваивания</li> </ul> <div class="admonition note"> <p class=admonition-title>Замечание</p> <p>Для корректной работы морж-оператора требуется Python 3.8 или более поздней версии.</p> </div> <h3 id=->Основы морж-оператора<a class=headerlink href=#- title="Permanent link">&para;</a></h3> <p><a class=glightbox href=../_static/walrus.png data-type=image data-width=auto data-height=auto data-desc-position=bottom><img align=right alt src=../_static/walrus.png width=250></a></p> <p>Оператор <code>:=</code> официально известен как оператор выражения присваивания. Во время ранних дискуссий его назвали оператором моржа, потому что синтаксис <code>:=</code> напоминает глаза и бивни лежащего на боку моржа. Также иногда можно увидеть, что оператор <code>:=</code> называют «оператор двоеточие равно» (colon equals operator). Еще одним термином, используемым для выражений присваивания, являются именованные выражения.</p> <p>Чтобы получить первое представление о том, что такое выражения присваивания, можно поэкспериментировать со следующим кодом:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-29-1>1</a></span>
<span class=normal><a href=#__codelineno-29-2>2</a></span>
<span class=normal><a href=#__codelineno-29-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1></a><span class=n>walrus</span> <span class=o>=</span> <span class=kc>False</span>
<a id=__codelineno-29-2 name=__codelineno-29-2></a>
<a id=__codelineno-29-3 name=__codelineno-29-3></a><span class=nb>print</span><span class=p>(</span><span class=n>walrus</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a>False
</code></pre></div></p> <p>В примере выше показан традиционный оператор присваивания, в котором переменной <code>walrus</code> присваивается значение <code>False</code>.</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-31-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1></a><span class=nb>print</span><span class=p>(</span><span class=n>walrus</span> <span class=o>:=</span> <span class=kc>True</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a>True
</code></pre></div></p> <p>Затем, используется выражение присваивания, чтобы присвоить значение <code>True</code> для <code>walrus</code>. В обоих случаях можно ссылаться на присвоенные значения, используя имя переменной <code>walrus</code>.</p> <p>Между двумя типами присваиваний, рассмотренными выше с переменной <code>walrus</code>, есть тонкая, но важная разница. Выражение присваивания возвращает значение, а традиционное присваивание — нет.</p> <p>В этих примерах можно увидеть еще один важный аспект операторов моржа. Оператор <code>:=</code> не делает ничего такого, что было бы невозможно без него. С помощью оператора моржа можно лишь делать определенные конструкции более удобными и иногда можно более четко передать цель кода.</p> <p>Общее представление о том, что такое оператор <code>:=</code> и что он может делать получено. Это оператор, используемый в выражениях присваивания, который может возвращать присваиваемое значение, в отличие от традиционных операторов присваивания.</p> <div class="admonition warning"> <p class=admonition-title>Внимание</p> <p>Один из принципов разработки, лежащий в основе оператора walrus, заключается в том, что не существует идентичных контекстов кода, в которых были бы допустимы как оператор присваивания, использующий оператор <code>=</code>, так и выражение присваивания, использующее оператор <code>:=</code>. Например, невозможно выполнить простое присваивание с помощью оператора walrus:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-33-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1></a><span class=n>walrus</span> <span class=o>:=</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=w>  </span>File<span class=w> </span><span class=s2>&quot;&lt;stdin&gt;&quot;</span>,<span class=w> </span>line<span class=w> </span><span class=m>1</span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=w>    </span>walrus<span class=w> </span>:<span class=o>=</span><span class=w> </span>True
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=w>           </span>^
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>SyntaxError:<span class=w> </span>invalid<span class=w> </span>syntax
</code></pre></div></p> <p>В большинстве случаев можно добавить круглые скобки <code>()</code> вокруг выражения присваивания, чтобы сделать код валидным:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-35-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1></a><span class=p>(</span><span class=n>walrus</span> <span class=o>:=</span> <span class=kc>True</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <p>Однако такая конструкция не имеет большого смысла, т.к. удобнее воспользоваться оператором <code>=</code>. При этом запись традиционного оператора присваивания <code>=</code> внутри таких скобок не допускается.</p> </div> <h3 id=-_1>Варианты использования морж-оператора<a class=headerlink href=#-_1 title="Permanent link">&para;</a></h3> <p>Рассмотрим несколько примеров, где морж-оператора может упростить код. Общая тема всех этих примеров заключается в том, чтобы избегать различных видов повторения:</p> <ul> <li>повторные вызовы функций могут сделать код медленнее</li> <li>повторяющиеся операторы могут затруднить сопровождение кода</li> <li>повторяющиеся вызовы итераторов могут сделать код чрезмерно сложным</li> <li>увидим, как морж-оператор может помочь в каждой из этих ситуаций</li> </ul> <h4 id=_8>Отладка<a class=headerlink href=#_8 title="Permanent link">&para;</a></h4> <p>Возможно, один из лучших вариантов использования морж-оператора — отладка сложных выражений. Допустим, стоит задача найти расстояние между двумя точками на земной поверхности. Один из способов сделать это — использовать <a href=https://ru.frwiki.wiki/wiki/Formule_de_haversine>формулу <code>гаверсинуса</code></a>:</p> <div class=arithmatex>\[ d = 2r \arcsin ( \sqrt{ hav(\varphi_2 - \varphi_1) + \cos(\varphi_1) \cos(\varphi_2) hav(\lambda_2 - \lambda_1) } ) \]</div> <div class=arithmatex>\[ = 2r \arcsin ( \sqrt{ \sin^2(\frac{\varphi_2 - \varphi_1}{2}) + \cos(\varphi_1) \cos(\varphi_2) \sin^2(\frac{\lambda_2 - \lambda_1}{2}) } ) \ , \]</div> <p>где <span class=arithmatex>\(\varphi\)</span> представляет широту, а <span class=arithmatex>\(\lambda\)</span> - долготу каждого местоположения.</p> <p>Чтобы продемонстрировать эту формулу, можно рассчитать расстояние между Москвой (55,45° с. ш., 37,36° в. д.) и Ванкувером (51,3° с. ш., 0,7° з. д.) следующим образом:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-36-1> 1</a></span>
<span class=normal><a href=#__codelineno-36-2> 2</a></span>
<span class=normal><a href=#__codelineno-36-3> 3</a></span>
<span class=normal><a href=#__codelineno-36-4> 4</a></span>
<span class=normal><a href=#__codelineno-36-5> 5</a></span>
<span class=normal><a href=#__codelineno-36-6> 6</a></span>
<span class=normal><a href=#__codelineno-36-7> 7</a></span>
<span class=normal><a href=#__codelineno-36-8> 8</a></span>
<span class=normal><a href=#__codelineno-36-9> 9</a></span>
<span class=normal><a href=#__codelineno-36-10>10</a></span>
<span class=normal><a href=#__codelineno-36-11>11</a></span>
<span class=normal><a href=#__codelineno-36-12>12</a></span>
<span class=normal><a href=#__codelineno-36-13>13</a></span>
<span class=normal><a href=#__codelineno-36-14>14</a></span>
<span class=normal><a href=#__codelineno-36-15>15</a></span>
<span class=normal><a href=#__codelineno-36-16>16</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1></a><span class=kn>from</span> <span class=nn>math</span> <span class=kn>import</span> <span class=n>asin</span><span class=p>,</span> <span class=n>cos</span><span class=p>,</span> <span class=n>radians</span><span class=p>,</span> <span class=n>sin</span><span class=p>,</span> <span class=n>sqrt</span>
<a id=__codelineno-36-2 name=__codelineno-36-2></a>
<a id=__codelineno-36-3 name=__codelineno-36-3></a><span class=n>rad</span> <span class=o>=</span> <span class=mi>6371</span>  <span class=c1># приблизительный радиус Земли в километрах</span>
<a id=__codelineno-36-4 name=__codelineno-36-4></a>
<a id=__codelineno-36-5 name=__codelineno-36-5></a><span class=c1># Расположение Москвы и Лондона</span>
<a id=__codelineno-36-6 name=__codelineno-36-6></a><span class=n>ϕ1</span><span class=p>,</span> <span class=n>λ1</span> <span class=o>=</span> <span class=n>radians</span><span class=p>(</span><span class=mf>55.45</span><span class=p>),</span> <span class=n>radians</span><span class=p>(</span><span class=mf>37.36</span><span class=p>)</span>
<a id=__codelineno-36-7 name=__codelineno-36-7></a><span class=n>ϕ2</span><span class=p>,</span> <span class=n>λ2</span> <span class=o>=</span> <span class=n>radians</span><span class=p>(</span><span class=mf>51.3</span><span class=p>),</span> <span class=n>radians</span><span class=p>(</span><span class=o>-</span><span class=mf>0.7</span><span class=p>)</span>
<a id=__codelineno-36-8 name=__codelineno-36-8></a>
<a id=__codelineno-36-9 name=__codelineno-36-9></a><span class=c1># Расстояние между Москвой и Лондоном</span>
<a id=__codelineno-36-10 name=__codelineno-36-10></a><span class=n>dist</span> <span class=o>=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>rad</span> <span class=o>*</span> <span class=n>asin</span><span class=p>(</span>
<a id=__codelineno-36-11 name=__codelineno-36-11></a>    <span class=n>sqrt</span><span class=p>(</span>
<a id=__codelineno-36-12 name=__codelineno-36-12></a>        <span class=n>sin</span><span class=p>((</span><span class=n>ϕ2</span> <span class=o>-</span> <span class=n>ϕ1</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span> <span class=o>**</span> <span class=mi>2</span>
<a id=__codelineno-36-13 name=__codelineno-36-13></a>        <span class=o>+</span> <span class=n>cos</span><span class=p>(</span><span class=n>ϕ1</span><span class=p>)</span> <span class=o>*</span> <span class=n>cos</span><span class=p>(</span><span class=n>ϕ2</span><span class=p>)</span> <span class=o>*</span> <span class=n>sin</span><span class=p>((</span><span class=n>λ2</span> <span class=o>-</span> <span class=n>λ1</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span> <span class=o>**</span> <span class=mi>2</span>
<a id=__codelineno-36-14 name=__codelineno-36-14></a>    <span class=p>)</span>
<a id=__codelineno-36-15 name=__codelineno-36-15></a><span class=p>)</span>
<a id=__codelineno-36-16 name=__codelineno-36-16></a><span class=nb>print</span><span class=p>(</span><span class=n>dist</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=m>2533</span>.3259714914857
</code></pre></div></p> <p>Как можно увидеть, расстояние от Москвы до Лондона составляет чуть более 2500 километров.</p> <p>Теперь предположим, что нужно перепроверить реализацию и посмотреть, насколько члены <code>гаверсинуса</code> влияют на конечный результат. Можно скопировать и вставить часть из основного кода, чтобы оценить его отдельно. Однако также можно использовать оператор <code>:=</code>, чтобы дать имя интересующему подвыражению:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-38-1>1</a></span>
<span class=normal><a href=#__codelineno-38-2>2</a></span>
<span class=normal><a href=#__codelineno-38-3>3</a></span>
<span class=normal><a href=#__codelineno-38-4>4</a></span>
<span class=normal><a href=#__codelineno-38-5>5</a></span>
<span class=normal><a href=#__codelineno-38-6>6</a></span>
<span class=normal><a href=#__codelineno-38-7>7</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1></a><span class=n>dist</span> <span class=o>=</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>rad</span> <span class=o>*</span> <span class=n>asin</span><span class=p>(</span>
<a id=__codelineno-38-2 name=__codelineno-38-2></a>    <span class=n>sqrt</span><span class=p>(</span>
<a id=__codelineno-38-3 name=__codelineno-38-3></a>        <span class=p>(</span><span class=n>ϕ_hav</span> <span class=o>:=</span> <span class=n>sin</span><span class=p>((</span><span class=n>ϕ2</span> <span class=o>-</span> <span class=n>ϕ1</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span> <span class=o>**</span> <span class=mi>2</span><span class=p>)</span>
<a id=__codelineno-38-4 name=__codelineno-38-4></a>        <span class=o>+</span> <span class=n>cos</span><span class=p>(</span><span class=n>ϕ1</span><span class=p>)</span> <span class=o>*</span> <span class=n>cos</span><span class=p>(</span><span class=n>ϕ2</span><span class=p>)</span> <span class=o>*</span> <span class=n>sin</span><span class=p>((</span><span class=n>λ2</span> <span class=o>-</span> <span class=n>λ1</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span> <span class=o>**</span> <span class=mi>2</span>
<a id=__codelineno-38-5 name=__codelineno-38-5></a>    <span class=p>)</span>
<a id=__codelineno-38-6 name=__codelineno-38-6></a><span class=p>)</span>
<a id=__codelineno-38-7 name=__codelineno-38-7></a><span class=nb>print</span><span class=p>(</span><span class=n>ϕ_hav</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=m>0</span>.0013109950744640937
</code></pre></div></p> <p>Преимущество использования морж-оператора здесь заключается в том, что одновременно можно вычислять значение итогового значения и отслеживаете значение <code>ϕ_hav</code>. Это позволяет подтвердить, что не было допущено никаких ошибок во время отладки.</p> <h4 id=_9>Списки и словари<a class=headerlink href=#_9 title="Permanent link">&para;</a></h4> <p>Списки — это мощные структуры данных в Python, которые часто представляют собой ряд связанных атрибутов. Точно так же словари используются во всем Python и отлично подходят для структурирования информации.</p> <p>Иногда при настройке таких структур данных приходится выполнять одну и ту же операцию несколько раз. В качестве первого примера вычислим некоторую базовую описательную статистику списка чисел и сохраним их в словаре:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-40-1>1</a></span>
<span class=normal><a href=#__codelineno-40-2>2</a></span>
<span class=normal><a href=#__codelineno-40-3>3</a></span>
<span class=normal><a href=#__codelineno-40-4>4</a></span>
<span class=normal><a href=#__codelineno-40-5>5</a></span>
<span class=normal><a href=#__codelineno-40-6>6</a></span>
<span class=normal><a href=#__codelineno-40-7>7</a></span>
<span class=normal><a href=#__codelineno-40-8>8</a></span>
<span class=normal><a href=#__codelineno-40-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1></a><span class=n>numbers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>12</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>18</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
<a id=__codelineno-40-2 name=__codelineno-40-2></a>
<a id=__codelineno-40-3 name=__codelineno-40-3></a><span class=n>data_structure</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-40-4 name=__codelineno-40-4></a>    <span class=s2>&quot;длина&quot;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>),</span>
<a id=__codelineno-40-5 name=__codelineno-40-5></a>    <span class=s2>&quot;сумма&quot;</span><span class=p>:</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numbers</span><span class=p>),</span>
<a id=__codelineno-40-6 name=__codelineno-40-6></a>    <span class=s2>&quot;среднее&quot;</span><span class=p>:</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>),</span>
<a id=__codelineno-40-7 name=__codelineno-40-7></a><span class=p>}</span>
<a id=__codelineno-40-8 name=__codelineno-40-8></a>
<a id=__codelineno-40-9 name=__codelineno-40-9></a><span class=nb>print</span><span class=p>(</span><span class=n>data_structure</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=o>{</span><span class=s1>&#39;длина&#39;</span>:<span class=w> </span><span class=m>8</span>,<span class=w> </span><span class=s1>&#39;сумма&#39;</span>:<span class=w> </span><span class=m>46</span>,<span class=w> </span><span class=s1>&#39;среднее&#39;</span>:<span class=w> </span><span class=m>5</span>.75<span class=o>}</span>
</code></pre></div></p> <p>Важно обратить внимание, что и сумма, и длина списка чисел вычисляются дважды. В этом простом примере последствия не так уж плохи, но если бы список был больше или вычисления были бы более сложными, вероятно захотелось бы оптимизировать такой код. Для этого можно сначала переместить вызовы функций из определения словаря:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-42-1> 1</a></span>
<span class=normal><a href=#__codelineno-42-2> 2</a></span>
<span class=normal><a href=#__codelineno-42-3> 3</a></span>
<span class=normal><a href=#__codelineno-42-4> 4</a></span>
<span class=normal><a href=#__codelineno-42-5> 5</a></span>
<span class=normal><a href=#__codelineno-42-6> 6</a></span>
<span class=normal><a href=#__codelineno-42-7> 7</a></span>
<span class=normal><a href=#__codelineno-42-8> 8</a></span>
<span class=normal><a href=#__codelineno-42-9> 9</a></span>
<span class=normal><a href=#__codelineno-42-10>10</a></span>
<span class=normal><a href=#__codelineno-42-11>11</a></span>
<span class=normal><a href=#__codelineno-42-12>12</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1></a><span class=n>numbers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>12</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>18</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
<a id=__codelineno-42-2 name=__codelineno-42-2></a>
<a id=__codelineno-42-3 name=__codelineno-42-3></a><span class=n>num_length</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span>
<a id=__codelineno-42-4 name=__codelineno-42-4></a><span class=n>num_sum</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numbers</span><span class=p>)</span>
<a id=__codelineno-42-5 name=__codelineno-42-5></a>
<a id=__codelineno-42-6 name=__codelineno-42-6></a><span class=n>data_structure</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-42-7 name=__codelineno-42-7></a>    <span class=s2>&quot;длина&quot;</span><span class=p>:</span> <span class=n>num_length</span><span class=p>,</span>
<a id=__codelineno-42-8 name=__codelineno-42-8></a>    <span class=s2>&quot;сумма&quot;</span><span class=p>:</span> <span class=n>num_sum</span><span class=p>,</span>
<a id=__codelineno-42-9 name=__codelineno-42-9></a>    <span class=s2>&quot;среднее&quot;</span><span class=p>:</span> <span class=n>num_sum</span> <span class=o>/</span> <span class=n>num_length</span><span class=p>,</span>
<a id=__codelineno-42-10 name=__codelineno-42-10></a><span class=p>}</span>
<a id=__codelineno-42-11 name=__codelineno-42-11></a>
<a id=__codelineno-42-12 name=__codelineno-42-12></a><span class=nb>print</span><span class=p>(</span><span class=n>data_structure</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=o>{</span><span class=s1>&#39;длина&#39;</span>:<span class=w> </span><span class=m>8</span>,<span class=w> </span><span class=s1>&#39;сумма&#39;</span>:<span class=w> </span><span class=m>46</span>,<span class=w> </span><span class=s1>&#39;среднее&#39;</span>:<span class=w> </span><span class=m>5</span>.75<span class=o>}</span>
</code></pre></div></p> <p>Переменные <code>num_length</code> и <code>num_sum</code> используются только для оптимизации вычислений внутри словаря. Используя морж-оператор, эту роль можно сделать более понятной:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-44-1>1</a></span>
<span class=normal><a href=#__codelineno-44-2>2</a></span>
<span class=normal><a href=#__codelineno-44-3>3</a></span>
<span class=normal><a href=#__codelineno-44-4>4</a></span>
<span class=normal><a href=#__codelineno-44-5>5</a></span>
<span class=normal><a href=#__codelineno-44-6>6</a></span>
<span class=normal><a href=#__codelineno-44-7>7</a></span>
<span class=normal><a href=#__codelineno-44-8>8</a></span>
<span class=normal><a href=#__codelineno-44-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-44-1 name=__codelineno-44-1></a><span class=n>numbers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>12</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>18</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
<a id=__codelineno-44-2 name=__codelineno-44-2></a>
<a id=__codelineno-44-3 name=__codelineno-44-3></a><span class=n>data_structure</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-44-4 name=__codelineno-44-4></a>    <span class=s2>&quot;длина&quot;</span><span class=p>:</span> <span class=p>(</span><span class=n>num_length</span> <span class=o>:=</span> <span class=nb>len</span><span class=p>(</span><span class=n>numbers</span><span class=p>)),</span>
<a id=__codelineno-44-5 name=__codelineno-44-5></a>    <span class=s2>&quot;сумма&quot;</span><span class=p>:</span> <span class=p>(</span><span class=n>num_sum</span> <span class=o>:=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numbers</span><span class=p>)),</span>
<a id=__codelineno-44-6 name=__codelineno-44-6></a>    <span class=s2>&quot;среднее&quot;</span><span class=p>:</span> <span class=n>num_sum</span> <span class=o>/</span> <span class=n>num_length</span><span class=p>,</span>
<a id=__codelineno-44-7 name=__codelineno-44-7></a><span class=p>}</span>
<a id=__codelineno-44-8 name=__codelineno-44-8></a>
<a id=__codelineno-44-9 name=__codelineno-44-9></a><span class=nb>print</span><span class=p>(</span><span class=n>data_structure</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=o>{</span><span class=s1>&#39;длина&#39;</span>:<span class=w> </span><span class=m>8</span>,<span class=w> </span><span class=s1>&#39;сумма&#39;</span>:<span class=w> </span><span class=m>46</span>,<span class=w> </span><span class=s1>&#39;среднее&#39;</span>:<span class=w> </span><span class=m>5</span>.75<span class=o>}</span>
</code></pre></div></p> <p><code>num_length</code> и <code>num_sum</code> теперь определены внутри определения описания. Это явный намёк на то, что эти переменные используются только для оптимизации этих вычислений и больше не используются позже.</p> <div class="admonition note"> <p class=admonition-title>Замечание</p> <p>Область видимости переменных <code>num_length</code> и <code>num_sum</code> одинакова в примере с морж-оператором и в примере без него. Это означает, что в обоих примерах переменные доступны после определения описания.</p> <p>Несмотря на то, что оба примера функционально очень похожи, преимущество использования выражений присваивания заключается в том, что оператор <code>:=</code> сообщает о назначении этих переменных как одноразовые оптимизации.</p> </div> <h2 id=f-f-strings>f-строки (f-strings)<a class=headerlink href=#f-f-strings title="Permanent link">&para;</a></h2> <p>О f-строках <a href=../variable_types_output/#_4>говорили ранее</a>, полезно погрузиться в дополнительные возможности этого удобного и в последнее время наиболее часто используемого функционала для форматирования строк.</p> <p>В большинстве случаев синтаксис аналогичен старому <code>%</code>-форматированию с добавлением <code>{}</code> и <code>:</code> вместо <code>%</code>. Например, <code>%03.2f</code> можно перевести как <code>{:03.2f}</code>.</p> <h3 id=_10>Спецификаторы формата<a class=headerlink href=#_10 title="Permanent link">&para;</a></h3> <p>Спецификаторы в f-строках можно использовать таким образом:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-46-1>1</a></span>
<span class=normal><a href=#__codelineno-46-2>2</a></span>
<span class=normal><a href=#__codelineno-46-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-46-1 name=__codelineno-46-1></a><span class=n>x</span> <span class=o>=</span> <span class=mf>12.3456789</span>
<a id=__codelineno-46-2 name=__codelineno-46-2></a>
<a id=__codelineno-46-3 name=__codelineno-46-3></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>x</span><span class=si>:</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=m>12</span>.346
</code></pre></div></p> <p>Спецификаторы формата могут содержать оцениваемые выражения. Это позволяет использовать следующий код:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-48-1>1</a></span>
<span class=normal><a href=#__codelineno-48-2>2</a></span>
<span class=normal><a href=#__codelineno-48-3>3</a></span>
<span class=normal><a href=#__codelineno-48-4>4</a></span>
<span class=normal><a href=#__codelineno-48-5>5</a></span>
<span class=normal><a href=#__codelineno-48-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-48-1 name=__codelineno-48-1></a><span class=n>width</span> <span class=o>=</span> <span class=mi>12</span>
<a id=__codelineno-48-2 name=__codelineno-48-2></a><span class=n>precision</span> <span class=o>=</span> <span class=mi>4</span>
<a id=__codelineno-48-3 name=__codelineno-48-3></a><span class=n>value</span> <span class=o>=</span> <span class=mf>12.3456789</span>
<a id=__codelineno-48-4 name=__codelineno-48-4></a><span class=n>res</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;result: </span><span class=si>{</span><span class=n>value</span><span class=si>:{</span><span class=n>width</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>precision</span><span class=si>}}</span><span class=s2>&quot;</span>
<a id=__codelineno-48-5 name=__codelineno-48-5></a>
<a id=__codelineno-48-6 name=__codelineno-48-6></a><span class=nb>print</span><span class=p>(</span><span class=n>res</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a>result:<span class=w>        </span><span class=m>12</span>.35
</code></pre></div></p> <p>После оценки выражений в спецификаторе формата (при необходимости) спецификаторы формата не интерпретируются оценщиком f-строки. Как и в str.format(), они просто передаются в метод <strong>format</strong>() форматируемого объекта.</p> <h3 id=_11>Переменные со значениями<a class=headerlink href=#_11 title="Permanent link">&para;</a></h3> <p>Версия Python 3.8 не обошла стороной и f-строки, дополнив их возможностями по выводу имён переменных вместе со значениями.</p> <p>Как это работало до версии 3.8:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-50-1>1</a></span>
<span class=normal><a href=#__codelineno-50-2>2</a></span>
<span class=normal><a href=#__codelineno-50-3>3</a></span>
<span class=normal><a href=#__codelineno-50-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-50-1 name=__codelineno-50-1></a><span class=n>x</span> <span class=o>=</span> <span class=mi>1</span>
<a id=__codelineno-50-2 name=__codelineno-50-2></a><span class=n>y</span> <span class=o>=</span> <span class=mi>8</span>
<a id=__codelineno-50-3 name=__codelineno-50-3></a>
<a id=__codelineno-50-4 name=__codelineno-50-4></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;x = </span><span class=si>{</span><span class=n>x</span><span class=si>}</span><span class=s2>, y = </span><span class=si>{</span><span class=n>y</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=nv>x</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>1</span>,<span class=w> </span><span class=nv>y</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>8</span>
</code></pre></div></p> <p>И как это стало работать начиная с версии Python 3.8:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-52-1>1</a></span>
<span class=normal><a href=#__codelineno-52-2>2</a></span>
<span class=normal><a href=#__codelineno-52-3>3</a></span>
<span class=normal><a href=#__codelineno-52-4>4</a></span>
<span class=normal><a href=#__codelineno-52-5>5</a></span>
<span class=normal><a href=#__codelineno-52-6>6</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-52-1 name=__codelineno-52-1></a><span class=n>x</span> <span class=o>=</span> <span class=mi>1</span>
<a id=__codelineno-52-2 name=__codelineno-52-2></a><span class=n>y</span> <span class=o>=</span> <span class=mi>8</span>
<a id=__codelineno-52-3 name=__codelineno-52-3></a><span class=n>z</span> <span class=o>=</span> <span class=mf>12.3456789</span>
<a id=__codelineno-52-4 name=__codelineno-52-4></a>
<a id=__codelineno-52-5 name=__codelineno-52-5></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>x</span><span class=w> </span><span class=si>= }</span><span class=s2>, </span><span class=si>{</span><span class=n>y</span><span class=w> </span><span class=si>= }</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-52-6 name=__codelineno-52-6></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>z</span><span class=w> </span><span class=si>= :</span><span class=s2>.3f</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=nv>x</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>1</span>,<span class=w> </span><span class=nv>y</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>8</span>
<a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=nv>z</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>12</span>.346
</code></pre></div></p> <h3 id=-_2>Мини-язык спецификаций форматирования<a class=headerlink href=#-_2 title="Permanent link">&para;</a></h3> <p><a href=https://docs.python.org/3/library/string.html#formatspec>Format Specification Mini-Language</a> Python, поддерживаемый f-строками, позволяет реализовать множество операций форматирования данных.</p> <h4 id=_12>Заполнение и центрирование текста<a class=headerlink href=#_12 title="Permanent link">&para;</a></h4> <p>Предположим у нас есть следующая строка</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-54-1>1</a></span>
<span class=normal><a href=#__codelineno-54-2>2</a></span>
<span class=normal><a href=#__codelineno-54-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-54-1 name=__codelineno-54-1></a><span class=n>text</span> <span class=o>=</span> <span class=s2>&quot;ODS&quot;</span>
<a id=__codelineno-54-2 name=__codelineno-54-2></a>
<a id=__codelineno-54-3 name=__codelineno-54-3></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>text</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a>ODS
</code></pre></div></p> <p>Если добавить в неё:</p> <ul> <li>двоеточие,</li> <li>символ-заполнитель,</li> <li>указать требуемую длину строки с помощью <code>&lt;</code></li> </ul> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-56-1>1</a></span>
<span class=normal><a href=#__codelineno-56-2>2</a></span>
<span class=normal><a href=#__codelineno-56-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-56-1 name=__codelineno-56-1></a><span class=n>text</span> <span class=o>=</span> <span class=s2>&quot;ODS&quot;</span>
<a id=__codelineno-56-2 name=__codelineno-56-2></a>
<a id=__codelineno-56-3 name=__codelineno-56-3></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>text</span><span class=si>:</span><span class=s2>-&lt;15</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <p>То не занятый текстом остаток строки будет заполнен выбранным символом-заполнителем:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a>ODS------------
</code></pre></div> <p>Если указать длину строки через <code>&gt;</code>, то можно заполнить строку с левой стороны:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-58-1>1</a></span>
<span class=normal><a href=#__codelineno-58-2>2</a></span>
<span class=normal><a href=#__codelineno-58-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-58-1 name=__codelineno-58-1></a><span class=n>text</span> <span class=o>=</span> <span class=s2>&quot;ODS&quot;</span>
<a id=__codelineno-58-2 name=__codelineno-58-2></a>
<a id=__codelineno-58-3 name=__codelineno-58-3></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>text</span><span class=si>:</span><span class=s2>-&gt;15</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a>------------ODS
</code></pre></div></p> <details class=question> <summary>Как заполнить строку с обеих сторон, чтобы получилось <code>------ODS------</code>?</summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-60-1>1</a></span>
<span class=normal><a href=#__codelineno-60-2>2</a></span>
<span class=normal><a href=#__codelineno-60-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-60-1 name=__codelineno-60-1></a><span class=n>text</span> <span class=o>=</span> <span class=s2>&quot;ODS&quot;</span>
<a id=__codelineno-60-2 name=__codelineno-60-2></a>
<a id=__codelineno-60-3 name=__codelineno-60-3></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>text</span><span class=si>:</span><span class=s2>-^15</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <h4 id=x-o>Замена <code>%x</code> и <code>%o</code> и преобразование значения в разные базы<a class=headerlink href=#x-o title="Permanent link">&para;</a></h4> <p>Формат поддерживает двоичные числа</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-61-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-61-1 name=__codelineno-61-1></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;int: </span><span class=si>{</span><span class=mi>42</span><span class=si>:</span><span class=s2>d</span><span class=si>}</span><span class=s2>;  hex: </span><span class=si>{</span><span class=mi>42</span><span class=si>:</span><span class=s2>x</span><span class=si>}</span><span class=s2>;  oct: </span><span class=si>{</span><span class=mi>42</span><span class=si>:</span><span class=s2>o</span><span class=si>}</span><span class=s2>;  bin: </span><span class=si>{</span><span class=mi>42</span><span class=si>:</span><span class=s2>b</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a>int:<span class=w> </span><span class=m>42</span><span class=p>;</span><span class=w>  </span>hex:<span class=w> </span>2a<span class=p>;</span><span class=w>  </span>oct:<span class=w> </span><span class=m>52</span><span class=p>;</span><span class=w>  </span>bin:<span class=w> </span><span class=m>101010</span>
</code></pre></div></p> <p>с префиксом <code>0x</code>, <code>0o</code>, или <code>0b</code>:</p> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-63-1>1</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-63-1 name=__codelineno-63-1></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;int: </span><span class=si>{</span><span class=mi>42</span><span class=si>:</span><span class=s2>d</span><span class=si>}</span><span class=s2>;  hex: </span><span class=si>{</span><span class=mi>42</span><span class=si>:</span><span class=s2>#x</span><span class=si>}</span><span class=s2>;  oct: </span><span class=si>{</span><span class=mi>42</span><span class=si>:</span><span class=s2>#o</span><span class=si>}</span><span class=s2>;  bin: </span><span class=si>{</span><span class=mi>42</span><span class=si>:</span><span class=s2>#b</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a>int:<span class=w> </span><span class=m>42</span><span class=p>;</span><span class=w>  </span>hex:<span class=w> </span>0x2a<span class=p>;</span><span class=w>  </span>oct:<span class=w> </span>0o52<span class=p>;</span><span class=w>  </span>bin:<span class=w> </span>0b101010
</code></pre></div></p> <h4 id=_13>Разделитель групп разрядов<a class=headerlink href=#_13 title="Permanent link">&para;</a></h4> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-65-1>1</a></span>
<span class=normal><a href=#__codelineno-65-2>2</a></span>
<span class=normal><a href=#__codelineno-65-3>3</a></span>
<span class=normal><a href=#__codelineno-65-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-65-1 name=__codelineno-65-1></a><span class=n>n</span> <span class=o>=</span> <span class=mi>1234567890</span>
<a id=__codelineno-65-2 name=__codelineno-65-2></a>
<a id=__codelineno-65-3 name=__codelineno-65-3></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>n</span><span class=si>:</span><span class=s2>,</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-65-4 name=__codelineno-65-4></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>n</span><span class=si>:</span><span class=s2>_</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=m>1</span>,234,567,890
<a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a>1_234_567_890
</code></pre></div></p> <h4 id=_14>Выражение процента<a class=headerlink href=#_14 title="Permanent link">&para;</a></h4> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-67-1>1</a></span>
<span class=normal><a href=#__codelineno-67-2>2</a></span>
<span class=normal><a href=#__codelineno-67-3>3</a></span>
<span class=normal><a href=#__codelineno-67-4>4</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-67-1 name=__codelineno-67-1></a><span class=n>points</span> <span class=o>=</span> <span class=mi>19</span>
<a id=__codelineno-67-2 name=__codelineno-67-2></a><span class=n>total</span> <span class=o>=</span> <span class=mi>22</span>
<a id=__codelineno-67-3 name=__codelineno-67-3></a>
<a id=__codelineno-67-4 name=__codelineno-67-4></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>points</span><span class=si>}</span><span class=s2> от </span><span class=si>{</span><span class=n>total</span><span class=si>}</span><span class=s2> составляет </span><span class=si>{</span><span class=n>points</span><span class=o>/</span><span class=n>total</span><span class=si>:</span><span class=s2>.2%</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=m>19</span><span class=w> </span>от<span class=w> </span><span class=m>22</span><span class=w> </span>составляет<span class=w> </span><span class=m>86</span>.36%
</code></pre></div></p> <h4 id=_15>Форматирование даты и времени<a class=headerlink href=#_15 title="Permanent link">&para;</a></h4> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-69-1>1</a></span>
<span class=normal><a href=#__codelineno-69-2>2</a></span>
<span class=normal><a href=#__codelineno-69-3>3</a></span>
<span class=normal><a href=#__codelineno-69-4>4</a></span>
<span class=normal><a href=#__codelineno-69-5>5</a></span>
<span class=normal><a href=#__codelineno-69-6>6</a></span>
<span class=normal><a href=#__codelineno-69-7>7</a></span>
<span class=normal><a href=#__codelineno-69-8>8</a></span>
<span class=normal><a href=#__codelineno-69-9>9</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-69-1 name=__codelineno-69-1></a><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
<a id=__codelineno-69-2 name=__codelineno-69-2></a>
<a id=__codelineno-69-3 name=__codelineno-69-3></a><span class=n>today</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>today</span><span class=p>()</span>
<a id=__codelineno-69-4 name=__codelineno-69-4></a><span class=n>now</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>utcnow</span><span class=p>()</span>
<a id=__codelineno-69-5 name=__codelineno-69-5></a>
<a id=__codelineno-69-6 name=__codelineno-69-6></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>today</span><span class=si>:</span><span class=s2>%d.%m.%Y</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>  <span class=c1># вывод даты в заданном формате</span>
<a id=__codelineno-69-7 name=__codelineno-69-7></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>today</span><span class=si>:</span><span class=s2>%Y</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>        <span class=c1># вывод года из даты</span>
<a id=__codelineno-69-8 name=__codelineno-69-8></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>now</span><span class=si>:</span><span class=s2>%T</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>          <span class=c1># вывод времени</span>
<a id=__codelineno-69-9 name=__codelineno-69-9></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>now</span><span class=si>:</span><span class=s2>%x</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>          <span class=c1># вывод даты</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=m>04</span>.11.2022
<a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a><span class=m>2022</span>
<a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a><span class=m>13</span>:25:45
<a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a><span class=m>11</span>/04/22
</code></pre></div></p> <h4 id=_16>Добавление начальных нулей<a class=headerlink href=#_16 title="Permanent link">&para;</a></h4> <p><div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-71-1>1</a></span>
<span class=normal><a href=#__codelineno-71-2>2</a></span>
<span class=normal><a href=#__codelineno-71-3>3</a></span></pre></div></td><td class=code><div><pre><span></span><code><a id=__codelineno-71-1 name=__codelineno-71-1></a><span class=n>n</span> <span class=o>=</span> <span class=mi>321</span>
<a id=__codelineno-71-2 name=__codelineno-71-2></a>
<a id=__codelineno-71-3 name=__codelineno-71-3></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>n</span><span class=si>:</span><span class=s2>08</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> <div class=highlight><pre><span></span><code><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=m>00000321</span>
</code></pre></div></p> <h2 id=_17>Заключение<a class=headerlink href=#_17 title="Permanent link">&para;</a></h2> <p>Как видно, синтаксический сахар облегчает жизнь программистам, и часто они даже не замечают или даже не знают, что используем его, но в любом случае всегда полезно знать, как он работает в деталях, потому что рано или поздно придётся глубже понять как работает та или иная вещь, чтобы успешно решать сложные задачи.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> К началу </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label="Нижний колонтитул"> <a href=../object_class_method/ class="md-footer__link md-footer__link--prev" aria-label="Назад: объекты, классы и методы"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Назад </span> <div class=md-ellipsis> объекты, классы и методы </div> </div> </a> <a href=../final/ class="md-footer__link md-footer__link--next" aria-label="Вперед: финальная лекция"> <div class=md-footer__title> <span class=md-footer__direction> Вперед </span> <div class=md-ellipsis> финальная лекция </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> © 2022 - с.г. ods.ai </div> </div> <div class=md-social> <a href=https://github.com/open-data-science/pycourse target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/ods_ai target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.action.edit", "content.tabs.link", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}}</script> <script src=../../assets/javascripts/bundle.081f42fc.min.js></script> <script src=../../javascripts/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>